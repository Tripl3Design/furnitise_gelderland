<!doctype html>
<html lang="en">

<head prefix="og: https://ogp.me/ns#">
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <script>
    const brand = 'pastoe';
    const product = 'frame';
    const title = 'frame';
    console.log(brand);
    console.log(product);
  </script>
  <!-- Google Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />


  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">

  <!-- Furnitise CSS -->
  <link rel="stylesheet" href="css/styles.min.css">
  <!--<link rel="stylesheet" href="furnitise.css">-->
  <!-- favicons 
                  <link rel="icon" type="image/svg+xml" href="img/favicon.svg">-->
  <!-- <link rel="icon" type="image/png" href="/assets/images/favicon.png"> -->

  <!-- MakePDF -->
  <script src='https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js'></script>

  <script src="https://furnitisemain.web.app/js/ua-parser.min.js"></script>
  <script src='https://furnitisemain.web.app/js/swiped-events.min.js'></script>
  <script src='projects/pastoe-frame/Build/pastoe-frame.loader.js'></script>

  <!--<script src='https://furnitisemain.web.app/js/initConfigurator.js'></script>-->
  <script src='js/controlpanel.js'></script>
  <script src='js/colorChanger.js'></script>
  <script src='projects/pastoe-frame/pdf.js'></script>
  <script src='projects/pastoe-frame/pricing.js'></script>

  <script src='projects/pastoe-frame/settings.js'></script>

  <script>
    "use strict"
    /*
        if (window.top == window.self) {
          window.location.href = 'http://furnitise.nl';
        }
    */
    console.log('%cThis configurator is made by TripleDesign. Visit furnitise.nl for more info!', 'background:red;color:#fff;font-weight: bold;')
    document.write( /*html*/ `<title>${title.charAt(0).toUpperCase()}${title.slice(1)} | ${brand.charAt(0).toUpperCase()}${brand.slice(1)}</title>`);

    const isWebGL2Supported = () => !!document.createElement('canvas').getContext('webgl2')
    isWebGL2Supported() ? console.log('This browser supports WebGL 2') : console.log('This browser does NOT support WebGL 2')

    var parser = new UAParser();
    if (parser.getDevice().type == 'tablet') {
      console.log('This is a ' + parser.getDevice().model + ' tablet');
    }

    //console.log('This is a ' + parser.getDevice().model + ' tablet');
    if (parser.getDevice().type == 'mobile') {
      screen.orientation.addEventListener("change", (event) => {
        const type = event.target.type;
        const angle = event.target.angle;
        console.log(`ScreenOrientation change: ${type}, ${angle} degrees.`);

        if (type == 'landscape-primary' || type == 'landscape-secondary') {
          document.write(`ScreenOrientation change: ${type}, ${angle} degrees.`);
        }
        else if (type == 'landscape-primary' || type == 'landscape-secondary') {
          document.write(`ScreenOrientation change: ${type}, ${angle} degrees.`);
        }
      });
    }

    function fullscreenToggle() {
      var controlpanelCol = document.getElementById('controlpanelCol');
      var modelviewerCol = document.getElementById('modelviewerCol');

      if (controlpanelCol.classList.contains('d-none')) {
        modelviewerCol.classList.add('d-block', 'col-md-7', 'col-12');
        controlpanelCol.classList.remove('d-none');
        controlpanelCol.classList.add('d-block', 'transition');
        document.getElementById('fullscreen').innerHTML = '<span class="material-symbols-outlined">open_in_full</span>';
      } else {
        modelviewerCol.classList.remove('col-md-7');
        controlpanelCol.classList.add('d-none');
        document.getElementById('fullscreen').innerHTML = '<span class="material-symbols-outlined">close_fullscreen</span>';
      }
    }

    function loadingProgress() {
      var loadingProgress = document.getElementById('furnitise-progress-bar');
      loadingProgress.style.width = 100 * progress + '%';
    }

    function loadingScreen() {
      var loadingContainer = document.getElementById('furnitise-loading-container');
      var loadingBar = document.getElementById('furnitise-loading');
      setTimeout(function () {
        loadingBar.classList.add('d-none');
        loadingContainer.classList.add('d-none');
      }, 2000);
    }

    function bodyOnload() {
      handleModelSelection();
    }
  </script>
</head>

<body onload="bodyOnload();">
  <div class="container-fluid m-0 p-0">
    <div class="row m-0 p-0 overflow-hidden">
      <div style="height: 100%" class="col-md-7 col-12 vh-100 m-0 p-0" id="modelviewerCol">
        <script>
          if (parser.getDevice().type == 'mobile') {
            document.write( /*html*/ `
                            <div class="position-absolute w-100">
                              <div style="letter-spacing: 2px;" class="h2 fw-light text-center text-uppercase m-0 p-0 mt-4" id="producttitleMobile">
                                ${title}
                              </div>
                                <!-- only for A'dammer -->
                                <div class="col-8 mx-auto m-0 p-3 z-1">
                                  <input id="rollshutter" type="range" class="form-range" value="" min="0" max="100">
                                </div>
                                  <!-- end only for A'dammer -->
                            </div>

                            <div class="col-12 position-absolute text-center bottom-0 m-0 p-3 pb-5 mb-5 z-0">
                                  <div class="btn-group btn-group-lg" role="group" aria-label="buttongroup">
                                    <!--<div type="button" class="btn bg-transparent" onclick=""><span class="material-symbols-outlined">share</span></div>-->
                                    <div type="button" class="btn bg-transparent" onclick="generateRenderTexture('pdf')"><span class="material-symbols-outlined">picture_as_pdf</span></div>
                                  </div>
                                </div>

                            <div class="row m-0 p-0 d-block" id="furnitise-loading-container">
                              <div class="col-12 position-absolute top-50 text-center translate-middle-y m-0 p-0">
                                <div class="d-block" id="furnitise-loading">
                                  <div><img src="img/logo_furnitise.svg" style="width: calc(15rem + 2vw);" alt="furnitise"></div>
                                </div>
                              </div>
                              <div class="position-relative start-0 top-0 m-0 p-0">
                                <div class="position-absolute row w-100 m-0 p-0">
                                  <div style="height: 1vw;" class="bg-dark p-0 m-0" id="progressBar"></div>
                                </div>
                              </div>
                            </div>
                            `);
          } else {
            document.write( /*html*/ `
<div class="brandlogo position-absolute top-0 start-0    pt-5    ps-5"><img src="img/logo_${brand}.svg" class="img-fluid"></div>

                            <div class="row d-block m-0 p-0" id="furnitise-loading-container">
                              <div class="col-md-7 col-12 position-absolute top-50 text-center translate-middle-y m-0 p-0">
                                <div class="d-block" id="furnitise-loading">
                                  <img class="img-fluid" src="img/logo_furnitise.svg" style="width: calc(100rem + 2vw);" alt="furnitise">
                                </div>
                              </div>
                              <div class="position-relative start-0 top-0 m-0 p-0">
                                <div class="position-absolute row w-100 m-0 p-0">
                                  <div style="height: 1vw;" class="bg-dark p-0 m-0" id="progressBar"></div>
                                </div>
                              </div>
                            </div>

                            <div class="row m-0 p-0">
                              <div class="col-md-7 col-12 position-absolute bottom-0 m-0 p-3">
                                <!-- only for A'dammer -->
                                <div class="col-4 position-absolute bottom-0 m-0 p-3 z-1">
                                  <input id="rollshutter" type="range" class="form-range" value="" min="0" max="100">
                                </div>
                                 <!-- end only for A'dammer -->
                                <div class="col-12 position-absolute text-end bottom-0 m-0 p-3 z-0">
                                  <div class="btn-group btn-group-lg" role="group" aria-label="buttongroup">
                                    <!--<div type="button" class="btn bg-transparent" onclick="shareConfiguration()"><span class="material-symbols-outlined">share</span></div>-->
                                    <div type="button" class="btn bg-transparent" onclick="generateRenderTexture('pdf')"><span class="material-symbols-outlined">picture_as_pdf</span></div>
                                    <div type="button" class="btn bg-transparent me-2" id="fullscreen" onclick="fullscreenToggle();"><span class="material-symbols-outlined">open_in_full</span></div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            `);
          }
          if (parser.getDevice().type == 'mobile') {
            document.write( /*html*/ `
            <canvas style="height: ${window.innerHeight - 55 + 'px'};" class="overflow-hidden" id="modelviewer"></canvas>
          `);
          } else {
            document.write( /*html*/ `
            <canvas class="overflow-hidden" id="modelviewer"></canvas>
          `);
          }
        </script>
      </div>

      <script>
        if (parser.getDevice().type == 'mobile') {
          document.write( /*html*/ `
                      <div id="mobileOffcanvas" style="height: 80px; border-radius: 30px 30px 0px 0px;" class="offcanvas offcanvas-bottom shadow-lg border border-0 show  m-0 p-0 ps-1 pe-2" data-bs-backdrop="false" tabindex="-1" aria-labelledby="mobileOffcanvasLabel">
                        
                          <div  type="button" style="color: #000; width: 100%" class="btn btn-link text-center m-0 p-0">
                        _____
                        </div>
                        `);

          const mobileOffcanvas = document.getElementById('mobileOffcanvas');
          const modelviewerCol = document.getElementById('modelviewerCol');
          const modelviewer = document.getElementById('modelviewer');

          mobileOffcanvas.addEventListener('swiped-up', function (e) {
            //console.log(e.target); // element that was swiped
            //console.log(e.detail); // see event data below

            if (mobileOffcanvas.style.height == '80px') {
              mobileOffcanvas.style.height = window.innerHeight / 2 + 'px';
              modelviewer.style.height = window.innerHeight / 2 + 25 + 'px';
            } else if (mobileOffcanvas.style.height == window.innerHeight / 2 + 'px') {
              mobileOffcanvas.style.height = window.innerHeight - 70 + 'px';
              modelviewer.style.height = window.innerHeight / 2 + 25 + 'px';
            }
          });

          mobileOffcanvas.addEventListener('swiped-down', function (e) {
            //console.log(e.target); // element that was swiped
            //console.log(e.detail); // see event data below

            if (mobileOffcanvas.style.height == window.innerHeight - 70 + 'px') {
              mobileOffcanvas.style.height = window.innerHeight / 2 + 'px';
              modelviewer.style.height = window.innerHeight / 2 + 25 + 'px';
            } else if (mobileOffcanvas.style.height == window.innerHeight / 2 + 'px') {
              mobileOffcanvas.style.height = '80px';
              modelviewer.style.height = window.innerHeight - 55 + 'px';
            }
          });

          document.write( /*html*/ `
                        <!-- buybar -->
                        <div class="offcanvas-header m-0 p-0 mx-3">
                          <h3 class="col-6 fw-bold m-1 p-1" id="price"></h3>

                          <div class="col-6">
  
                            <button class="fs-6 btn btn-dark float-end rounded-pill px-xxl-5 px-xl-4 px-3" type="button" onclick="submitForm()">add to cart</button>
              </div>
                          
                          <h6 class="col-12 fs-6 m-1 p-1" id="name"></h6>
                        </div>
                        <!-- end buybar -->
                        <div class="offcanvas-body small">
                        <div class="p-1 m-1">
                        `);
        } else {
          document.write( /*html*/ `
                        <div class="col-5 vh-100 m-0 p-0" id="controlpanelCol">
                          <div class="m-0 p-0" id="controlpanel">
                            <div class="px-xxl-5 px-xl-4 px-lg-3 px-md-3 px-sm-3    pt-xxl-5 pt-xl-4 pt-lg-3 pt-md-3 pt-sm-3    pb-0    m-0">
                        `);
        }
      </script>

      <script>
        if (parser.getDevice().type != 'mobile') {
          document.write( /*html*/ `
                        <div class="row m-0 p-0">
                          <div class="col-12 m-0 p-0    pb-xxl-4 pb-xl-3 pb-lg-2 pb-md-2 pb-sm-2">
                            <h3 class="fw-light productname text-start text-uppercase" id="producttitle">
                              ${title}
                            </h3>
                          </div>
                        </div>
                        `);
        }
      </script>

      <div id="controlpanelContainer"></div>
    </div>

    <script>
      if (parser.getDevice().type != 'mobile') {
        document.write( /*html*/ `
          <div class="row sticky-bottom bg-white m-0 p-0">
            <div class="row py-0    px-xxl-5 px-xl-4 px-3    m-0">
              <div class="border-top border-2 border-dark"></div>
              <!--<h3 class="col-6 fw-bold m-1 p-1" id="price"></h3>-->
              <div class="col-6 h5 fw-bold     py-xxl-4 m-0 p-0 py-xl-4 py-3" id="price"></div>

              <div class="col-6 p-0 m-0 pt-3 ">
                <button style="letter-spacing: 1px;" class="btn btn-dark float-end rounded-0 fw-light text-uppercase" type="button" onclick="submitForm()">add to cart</button>
              </div>
              <div class="col-12 m-0 p-0" id="name"></div>
            </div>
          </div>

        </div>
      </div>
    </div>      
    `);
      }
    </script>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous">
    </script>
  <script src="bundle.js">
  </script>

</body>

</html>